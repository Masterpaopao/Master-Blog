## 工作笔记

>入职公司：XXXX
>
>入职岗位：Python数据分析工程师、量化工程师

---

### Week-1

#### 2022-03-28

- RPS指标选股策略

  - 定义:	

  ```
  RPS指标是由科学家欧奈尔提出的，并且可以进行市场分析。RPS指标也被人们称为股价相对强度指标，它通常是指在一定的时间内，某一只股票的涨幅状况在全部股票涨幅状况中排名的情况。在股票市场内有1000只股票，如果有一只股票的涨幅状况在1000只股票的排名状况为100名，则该只股票的rps指标值为90。
  ```

  - 接入项目思考：这是最基础的RPS指标选股策略，在一只股票大涨之前，他的强度排行一般是在87%左右，只有强度上来了，这只股票才能被称为热门股票。
  - 但是在中国A股的行情之下，很多策略失去了意义，如果仅仅是依靠rps指标去选股，很容易买到追涨的股票被主力下套在高位。
  - 所以，我将rps指标进行了一定的改正，将近5日每一日的涨跌幅的平均值，作为rps指标排行的基准。

- 代码过程记录

  - dataframe存进csv的时候某一列是字符串形式，但是取出来又不是了，能解决的办法就是`df["某一列"].astype(str)`然后再送进df.loc[]进行条件判断
  - 想要在dataframe数据中插入一条新的一行数据到某一行，只需要`df = pd.concat([df.iloc[:i - 1, :], df_add, df.iloc[i - 1:, :]])`，i是索引
  - df.loc[]获取出来的数据类型是<class 'numpy.xxx'>，如果你想要找到某一个元素去比较数据类型，使用loc[]的数据别忘记来一次类型转换；包括df.loc[]里面做条件判断运算的时候，里面的数据也需要强类型转换
  - 如果你需要更新dataframe某一列的数据，也许需要使用apply+匿名函数`rps_df["涨跌幅"] = rps_df.apply(lambda d: format_percent(d, "涨跌幅"), axis=1)`，axis=1是代表逐行操作

- 还需要进一步做的事

  - 整理东数西算概念板块的成分股
  - 修改股票列表的导入方式，改成本地文件形式导入（待定）
  - 将买1卖1合并进rps指标作为参考项
  - 加入量比进行辅助分析选股策略
  - vcp模型的研究

---

#### 2022-03-29

- 搞定了股票列表的导入方式，改成本地csv文件形式，以后加成分股更加方便了
- 删除了买1卖1的相关代码
- Python的线程操作已经开始吃不消了，出现了高概率的吞操作事件，于是我将rps指标全部移到redis操作，发现情况已经大大改善。这说明现在的项目已经开始撑不住更多密集的线程操作了，这是之后必须要解决的性能限制。
- 写代码发现自己越写越昏，居然在每条Tick的元操作周期内部，加入了实时的时间判断，难怪数据总是差一口气，因为每条Tick的元操作周期内部的时间是行情断续的，取决于收到数据的时间。所以要判断实时的时间，应该独立于此进程之外！
- 明天加成分股，走100只股的压力测试
